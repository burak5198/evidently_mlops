name: Evidently Monitoring Examples

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  data-drift-example:
    name: Run Data Drift Example
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
      
      - name: Run data drift detection
        run: |
          cd 1_data_drift
          python monitor_data_drift.py
      
      - name: Upload drift report
        uses: actions/upload-artifact@v4
        with:
          name: data-drift-report
          path: 1_data_drift/*.html

  model-performance-example:
    name: Run Model Performance Example
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
      
      - name: Run performance monitoring
        run: |
          cd 2_model_performance
          python monitor_model_performance.py
      
      - name: Upload performance report
        uses: actions/upload-artifact@v4
        with:
          name: performance-report
          path: 2_model_performance/*.html

  llm-monitoring-example:
    name: Run LLM Monitoring Example
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
      
      - name: Run LLM quality monitoring (without API key)
        run: |
          cd 3_llm_monitoring
          python monitor_llm_judge.py
      
      - name: Upload LLM report
        uses: actions/upload-artifact@v4
        with:
          name: llm-monitoring-report
          path: 3_llm_monitoring/*.html

